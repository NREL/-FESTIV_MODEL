=start
Q_RESERVE_CAPABILITY(GEN,INTERVAL,RESERVETYPE)..
GEN_RESERVE_SCHEDULE(GEN,INTERVAL,RESERVETYPE) =L=
         (UNIT_STATUS(GEN,INTERVAL) + PUMPING(GEN,INTERVAL))*RESERVEVALUE(RESERVETYPE,"RESERVE_ON")*GENVALUE(GEN,"RAMP_RATE")*RESERVEVALUE(RESERVETYPE,"RESERVE_TIME")*
                 RESERVEVALUE(RESERVETYPE,"RESERVE_AGC")*GENVALUE(GEN,"AGC_QUALIFIED")*(1-RESERVEVALUE(RESERVETYPE,"RESERVE_GOV")-RESERVEVALUE(RESERVETYPE,"RESERVE_INERTIA"))
         + (UNIT_STATUS(GEN,INTERVAL) + PUMPING(GEN,INTERVAL))*RESERVEVALUE(RESERVETYPE,"RESERVE_ON")*GENVALUE(GEN,"RAMP_RATE")*RESERVEVALUE(RESERVETYPE,"RESERVE_TIME")*
                 (1-RESERVEVALUE(RESERVETYPE,"RESERVE_AGC"))*(1-RESERVEVALUE(RESERVETYPE,"RESERVE_GOV")-RESERVEVALUE(RESERVETYPE,"RESERVE_INERTIA"))
         + (1 - UNIT_STATUS(GEN,INTERVAL) - PUMPING(GEN,INTERVAL)) * (1 - RESERVEVALUE(RESERVETYPE,"RESERVE_ON")) * QSC(GEN,RESERVETYPE)*
                 (1-RESERVEVALUE(RESERVETYPE,"RESERVE_GOV")-RESERVEVALUE(RESERVETYPE,"RESERVE_INERTIA"))
         + RESERVEVALUE(RESERVETYPE,"RESERVE_GOV")*PFR_FULL(GEN,INTERVAL)*PFR_MULTIPLIER(GEN,INTERVAL,RESERVETYPE)*
                 (1-RESERVEVALUE(RESERVETYPE,"RESERVE_INERTIA")-RESERVEVALUE(RESERVETYPE,"RESERVE_AGC"))
         + GENVALUE(GEN,"INERTIA")*(UNIT_STATUS(GEN,INTERVAL) + PUMPING(GEN,INTERVAL))*RESERVEVALUE(RESERVETYPE,"RESERVE_ON")*RESERVEVALUE(RESERVETYPE,"RESERVE_INERTIA")*
                 GENVALUE(GEN,"CAPACITY")*(1-RESERVEVALUE(RESERVETYPE,"RESERVE_GOV")-RESERVEVALUE(RESERVETYPE,"RESERVE_AGC"))
;
=end
=start
Q_RESERVE_RAMPUP_LIMIT(GEN,INTERVAL)..
SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_ON") EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 1 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(GEN,INTERVAL,RESERVETYPE)/RESERVEVALUE(RESERVETYPE,"RESERVE_TIME"))
         =L= UNIT_STATUS(GEN,INTERVAL)*GENVALUE(GEN,"RAMP_RATE") + PUMPING(GEN,INTERVAL)*STORAGEVALUE(GEN,"PUMP_RAMP_RATE")
;
=end
=start
Q_RESERVE_RAMPDOWN_LIMIT(GEN,INTERVAL)..
SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_ON") EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 2 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(GEN,INTERVAL,RESERVETYPE)/RESERVEVALUE(RESERVETYPE,"RESERVE_TIME"))
         =L= UNIT_STATUS(GEN,INTERVAL)*GENVALUE(GEN,"RAMP_RATE") + PUMPING(GEN,INTERVAL)*STORAGEVALUE(GEN,"PUMP_RAMP_RATE")
;
=end
=start
Q_RESERVE_CAPABILITY2(GEN,INTERVAL,RESERVETYPE)$(RESERVEVALUE(RESERVETYPE,"RESERVE_GOV") EQ 1)..
GEN_RESERVE_SCHEDULE(GEN,INTERVAL,RESERVETYPE) =G= PFR_FULL(GEN,INTERVAL)*PFR_MULTIPLIER(GEN,INTERVAL,RESERVETYPE)
;
=end
=start
Q_RESERVE_CAPABILITY_VG(VARIABLE_GEN,INTERVAL,RESERVETYPE)..
GEN_RESERVE_SCHEDULE(VARIABLE_GEN,INTERVAL,RESERVETYPE) =L= GENVALUE(VARIABLE_GEN,"CAPACITY")*RESERVEVALUE(RESERVETYPE,"RESERVE_VG")
;
=end