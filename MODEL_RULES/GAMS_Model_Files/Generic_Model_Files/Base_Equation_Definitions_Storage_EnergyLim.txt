=start
Q_STORAGE_GENERATING_START(CONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) EQ 1)..
STORAGE_LEVEL(CONVENTIONAL_STORAGE_GEN,INTERVAL) =E= STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"INITIAL_STORAGE")
;
=end
=start
Q_STORAGE_GENERATING(CONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) GT 1)..
STORAGE_LEVEL(CONVENTIONAL_STORAGE_GEN,INTERVAL) =E= STORAGE_LEVEL(CONVENTIONAL_STORAGE_GEN,INTERVAL-1)
         - INTERVAL_LENGTH*GEN_EFFICIENCY(CONVENTIONAL_STORAGE_GEN,INTERVAL-1)
         + INTERVAL_LENGTH*PUMP_EFFICIENCY(CONVENTIONAL_STORAGE_GEN,INTERVAL-1)
;
=end
=start
Q_STORAGE_GENERATING_END(CONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) EQ CARD(INTERVAL))..
ENDING_STORAGE(CONVENTIONAL_STORAGE_GEN) =E= STORAGE_LEVEL(CONVENTIONAL_STORAGE_GEN,INTERVAL) - INTERVAL_LENGTH*GEN_EFFICIENCY(CONVENTIONAL_STORAGE_GEN,INTERVAL) + INTERVAL_LENGTH*PUMP_EFFICIENCY(CONVENTIONAL_STORAGE_GEN,INTERVAL)
;
=end
=start
Q_STORAGE_END(CONVENTIONAL_STORAGE_GEN)$(STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"ENFORCE_FINAL_STORAGE") EQ 1)..
ENDING_STORAGE(CONVENTIONAL_STORAGE_GEN) =E= STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"FINAL_STORAGE") + END_STORAGE_PENALTY_PLUS(CONVENTIONAL_STORAGE_GEN) - END_STORAGE_PENALTY_MINUS(CONVENTIONAL_STORAGE_GEN)
;
=end
=start
Q_STORAGE_MAX(STORAGE_GEN,INTERVAL)..
STORAGE_LEVEL(STORAGE_GEN,INTERVAL) =L= STORAGEVALUE(STORAGE_GEN,"STORAGE_MAX") + WASTED_STORAGE(STORAGE_GEN,INTERVAL)
;
=end
=start
Q_STORAGE_MIN(STORAGE_GEN,INTERVAL)..
STORAGE_LEVEL(STORAGE_GEN,INTERVAL) =G= 0 - WASTED_STORAGE(STORAGE_GEN,INTERVAL)
;
=end
=start
Q_STORAGE_GEN_EFFICIENCY9(CONVENTIONAL_STORAGE_GEN,INTERVAL)..
GEN_EFFICIENCY(CONVENTIONAL_STORAGE_GEN,INTERVAL) =E= GEN_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL)
;
=end
=start
Q_STORAGE_PUMP_EFFICIENCY9(CONVENTIONAL_STORAGE_GEN,INTERVAL)..
PUMP_EFFICIENCY(CONVENTIONAL_STORAGE_GEN,INTERVAL) =E= STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"EFFICIENCY")*CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL)
;
=end
=start
Q_STORAGE_RESERVEUP1(CONVENTIONAL_STORAGE_GEN,INTERVAL,RESERVETYPE)$((ORD(INTERVAL) GT 1) AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 1 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3))..
GEN_RESERVE_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL,RESERVETYPE)*INTERVAL_LENGTH =L= STORAGE_LEVEL(CONVENTIONAL_STORAGE_GEN,INTERVAL-1)
         + CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL) + WASTED_STORAGE(CONVENTIONAL_STORAGE_GEN,INTERVAL)
;
=end
=start
Q_STORAGE_RESERVEUP2(CONVENTIONAL_STORAGE_GEN,INTERVAL,RESERVETYPE)$((ORD(INTERVAL) EQ 1) AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 1 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3))..
GEN_RESERVE_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL,RESERVETYPE)*INTERVAL_LENGTH =L= STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"INITIAL_STORAGE") 
         + CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL) + WASTED_STORAGE(CONVENTIONAL_STORAGE_GEN,INTERVAL)
;
=end
=start
Q_STORAGE_RESERVEDOWN1(CONVENTIONAL_STORAGE_GEN,INTERVAL,RESERVETYPE)$((ORD(INTERVAL) GT 1) AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 2 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3))..
GEN_RESERVE_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL,RESERVETYPE)*INTERVAL_LENGTH =L= STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"STORAGE_MAX") - STORAGE_LEVEL(CONVENTIONAL_STORAGE_GEN,INTERVAL-1)
;
=end
=start
Q_STORAGE_RESERVEDOWN2(CONVENTIONAL_STORAGE_GEN,INTERVAL,RESERVETYPE)$((ORD(INTERVAL) EQ 1) AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 2 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3))..
GEN_RESERVE_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL,RESERVETYPE)*INTERVAL_LENGTH =L= STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"STORAGE_MAX") - STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"INITIAL_STORAGE") 
;
=end
