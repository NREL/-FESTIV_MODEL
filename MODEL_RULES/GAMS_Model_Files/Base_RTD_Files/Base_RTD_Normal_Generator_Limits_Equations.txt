=start
Q_GENTOTAL(GEN,INTERVAL)..
GEN_SCHEDULE(GEN,INTERVAL) =E= SUM(GENBLOCK(G,BLOCK)$(SAMEAS(GEN,G)),GEN_BLOCK_SCHEDULE(G,BLOCK,INTERVAL))
;
=end
=start
Q_GEN_BLOCK_LIMIT1(GENBLOCK(COSTS_BASED_ON_PWISE_GEN,BLOCK),INTERVAL)$(ORD(BLOCK) EQ 1)..
GEN_BLOCK_SCHEDULE(COSTS_BASED_ON_PWISE_GEN,BLOCK,INTERVAL) =L= BLOCK_CAP(COSTS_BASED_ON_PWISE_GEN,BLOCK)
;
=end
=start
Q_GEN_BLOCK_LIMIT2(GENBLOCK(COSTS_BASED_ON_PWISE_GEN,BLOCK),INTERVAL)$(ORD(BLOCK) GT 1)..
GEN_BLOCK_SCHEDULE(COSTS_BASED_ON_PWISE_GEN,BLOCK,INTERVAL) =L= BLOCK_CAP(COSTS_BASED_ON_PWISE_GEN,BLOCK) - BLOCK_CAP(COSTS_BASED_ON_PWISE_GEN,BLOCK-1)
;
=end
=start
Q_GENLIMIT_HIGH(GEN,INTERVAL)..
GEN_SCHEDULE(GEN,INTERVAL) =L= (   GENVALUE(GEN,"CAPACITY")*MAX(0,(UNIT_STATUS(GEN,INTERVAL)-UNIT_SHUTTINGDOWN(GEN,INTERVAL)))
                                                 + UNIT_SHUTTINGDOWN(GEN,INTERVAL)*GENVALUE(GEN,"MIN_GEN")*MAX(0,  ((MAX(1,(GENVALUE(GEN,"SHUTDOWN_TIME")*60)/RTDINTERVAL_LENGTH))-UNITSDCOUNT(GEN,INTERVAL))/(MAX(1,(GENVALUE(GEN,"SHUTDOWN_TIME")*60)/RTDINTERVAL_LENGTH))  )  ) *(1-DELAYSD(GEN))
                                                 + DELAYSD(GEN)*MAX(GENVALUE(GEN,"MIN_GEN"),(ACTUAL_GEN_OUTPUT(GEN)-   (INTERVAL_MINUTES(INTERVAL)+(RTD_PROCESS_TIME*BIND_INTERVAL_1(INTERVAL)))       *GENVALUE(GEN,"RAMP_RATE")))   ;
;
=end
=start
Q_GENLIMIT_HIGH2(GEN,INTERVAL)..
GEN_SCHEDULE(GEN,INTERVAL)
          + SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_ON")EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 1 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(GEN,INTERVAL,RESERVETYPE)) =L= (   UNIT_STATUS(GEN,INTERVAL)*GENVALUE(GEN,"CAPACITY")
         + PUMPING(GEN,INTERVAL)*0   )*(1-DELAYSD(GEN))
         + DELAYSD(GEN)*MAX(GENVALUE(GEN,"MIN_GEN"),(ACTUAL_GEN_OUTPUT(GEN)-INTERVAL_MINUTES(INTERVAL)*GENVALUE(GEN,"RAMP_RATE")));
;
=end
=start
Q_GENLIMIT_LOW(GEN,INTERVAL)..
GEN_SCHEDULE(GEN,INTERVAL) =G= GENVALUE(GEN,"MIN_GEN")*(UNIT_STATUS(GEN,INTERVAL)
         - UNIT_STARTINGUP(GEN,INTERVAL) - UNIT_SHUTTINGDOWN(GEN,INTERVAL))
         + UNIT_STARTINGUP(GEN,INTERVAL)*MIN(GENVALUE(GEN,"MIN_GEN"),(UNIT_STARTUPMINGENHELP(GEN,"1")*PROD(H$(ORD(H) LE ORD(INTERVAL)),UNIT_STARTINGUP(GEN,H))+
         SUM(H$(ORD(H) LE ORD(INTERVAL) AND ORD(H) GE RTD_SU_TWICE_IND(GEN,INTERVAL)),GENVALUE(GEN,"MIN_GEN")*UNIT_STARTINGUP(GEN,H)*(MIN(1,INTERVAL_MINUTES(H)/(60*GENVALUE(GEN,"STARTUP_TIME")))))))
;
=end
=start
Q_GENLIMIT_LOW2(GEN,INTERVAL)..
GEN_SCHEDULE(GEN,INTERVAL)
         - SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_ON")EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 2 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(GEN,INTERVAL,RESERVETYPE)) =G= GENVALUE(GEN,"MIN_GEN")*MAX(0,(UNIT_STATUS(GEN,INTERVAL)-UNIT_STARTINGUP(GEN,INTERVAL)-UNIT_SHUTTINGDOWN(GEN,INTERVAL)))
         + UNIT_STARTINGUP(GEN,INTERVAL)*MIN(GENVALUE(GEN,"MIN_GEN"),(UNIT_STARTUPMINGENHELP(GEN,"1")*PROD(H$(ORD(H) LE ORD(INTERVAL)),UNIT_STARTINGUP(GEN,H))+
         SUM(H$(ORD(H) LE ORD(INTERVAL) AND ORD(H) GE RTD_SU_TWICE_IND(GEN,INTERVAL)),GENVALUE(GEN,"MIN_GEN")*UNIT_STARTINGUP(GEN,H)*(MIN(1,INTERVAL_MINUTES(H)/(60*GENVALUE(GEN,"STARTUP_TIME")))))))
         - PUMPING(GEN,INTERVAL)*STORAGEVALUE(GEN,"MAX_PUMP")
;
=end
=start
Q_RAMP_RATE_UP(RAMP_LIMITED_GEN,INTERVAL)$(ORD(INTERVAL) GT 1)..
GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL) - GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL-1)
         =L= INTERVAL_MINUTES(INTERVAL)*GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")
         *(UNIT_STATUS(RAMP_LIMITED_GEN,INTERVAL)-UNIT_STARTINGUP(RAMP_LIMITED_GEN,INTERVAL))
         + GENVALUE(RAMP_LIMITED_GEN,"MIN_GEN")*MIN(1,(INTERVAL_MINUTES(INTERVAL)/(60*GENVALUE(RAMP_LIMITED_GEN,"STARTUP_TIME"))))*UNIT_STARTINGUP(RAMP_LIMITED_GEN,INTERVAL)
         + MAX(0,INTERVAL_MINUTES(INTERVAL) - 60*GENVALUE(RAMP_LIMITED_GEN,"STARTUP_TIME"))*GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*UNIT_STARTINGUP(RAMP_LIMITED_GEN,INTERVAL)
         + RAMP_UP_PENALTY(RAMP_LIMITED_GEN,INTERVAL)
;
=end
=start
Q_RAMP_RATE_DOWN(RAMP_LIMITED_GEN,INTERVAL)$(ORD(INTERVAL) GT 1)..
GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL) - GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL-1)
         =G= -1*INTERVAL_MINUTES(INTERVAL)*GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")
         *(UNIT_STATUS(RAMP_LIMITED_GEN,INTERVAL-1)-UNIT_SHUTTINGDOWN(RAMP_LIMITED_GEN,INTERVAL))
         - GENVALUE(RAMP_LIMITED_GEN,"MIN_GEN")*MIN(1,(INTERVAL_MINUTES(INTERVAL)/(GENVALUE(RAMP_LIMITED_GEN,"SHUTDOWN_TIME")*60))*UNIT_SHUTTINGDOWN(RAMP_LIMITED_GEN,INTERVAL))
         + MAX(0,INTERVAL_MINUTES(INTERVAL) - (GENVALUE(RAMP_LIMITED_GEN,"SHUTDOWN_TIME")*60))*GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*UNIT_SHUTTINGDOWN(RAMP_LIMITED_GEN,INTERVAL)
         - RAMP_DOWN_PENALTY(RAMP_LIMITED_GEN,INTERVAL)*UNIT_SHUTTINGDOWN(RAMP_LIMITED_GEN,INTERVAL)
;
=end
=start
Q_VARIABLE_FORECAST(VARIABLE_CAPACITY_RESOURCE,INTERVAL)..
GEN_SCHEDULE(VARIABLE_CAPACITY_RESOURCE,INTERVAL) =L= VG_FORECAST(INTERVAL,VARIABLE_CAPACITY_RESOURCE)*UNIT_STATUS(VARIABLE_CAPACITY_RESOURCE,INTERVAL) + GENVALUE(VARIABLE_CAPACITY_RESOURCE,"PERUNIT_COST")*GENVALUE(VARIABLE_CAPACITY_RESOURCE,"CAPACITY")
;
=end
=start
Q_GEN_BLOCK_LIMIT3(GENBLOCK(COSTS_BASED_ON_PU_GEN,BLOCK),INTERVAL)$(ORD(BLOCK) EQ 1)..
GEN_BLOCK_SCHEDULE(COSTS_BASED_ON_PU_GEN,BLOCK,INTERVAL) =L= BLOCK_CAP(COSTS_BASED_ON_PU_GEN,BLOCK)*VG_FORECAST(INTERVAL,COSTS_BASED_ON_PU_GEN)
;
=end
=start
Q_GEN_BLOCK_LIMIT4(GENBLOCK(COSTS_BASED_ON_PU_GEN,BLOCK),INTERVAL)$(ORD(BLOCK) GT 1)..
GEN_BLOCK_SCHEDULE(COSTS_BASED_ON_PU_GEN,BLOCK,INTERVAL) =L= (VG_FORECAST(INTERVAL,COSTS_BASED_ON_PU_GEN)+PUCOST_BLOCK_OFFSET(COSTS_BASED_ON_PU_GEN))*(BLOCK_CAP(COSTS_BASED_ON_PU_GEN,BLOCK) - BLOCK_CAP(COSTS_BASED_ON_PU_GEN,BLOCK-1))
;
=end
=start
Q_INTERFACE_SCHEDULE(INTERFACE,INTERVAL)..
GEN_SCHEDULE(INTERFACE,INTERVAL) =E= VG_FORECAST(INTERVAL,INTERFACE) + INTERFACE_INFEASIBLE_UP(INTERFACE,INTERVAL)  - INTERFACE_INFEASIBLE_DOWN(INTERFACE,INTERVAL)
;
=end
=start
Q_VARIABLE_RESERVE_CAPACITY(VARIABLE_GEN,INTERVAL)..
GEN_SCHEDULE(VARIABLE_GEN,INTERVAL) +
         SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_ON")EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 1 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(VARIABLE_GEN,INTERVAL,RESERVETYPE)) =L= VG_FORECAST(INTERVAL,VARIABLE_GEN)
;
=end
=start
Q_PREDEFINED_INTERCHANGES(INTERFACE,INTERVAL)..
         GEN_SCHEDULE(INTERFACE,INTERVAL) =E= INTERCHANGE(INTERVAL,INTERFACE);
=end
=start
Q_PREDEFINED_INTERCHANGES2(INTERFACE,INTERVAL,RESERVETYPE)..
         GEN_RESERVE_SCHEDULE(INTERFACE,INTERVAL,RESERVETYPE) =E= 0;
=end