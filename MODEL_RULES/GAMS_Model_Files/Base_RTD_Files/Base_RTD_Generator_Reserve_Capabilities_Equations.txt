=start
Q_RESERVE_CAPABILITY(GEN,INTERVAL,RESERVETYPE)..
GEN_RESERVE_SCHEDULE(GEN,INTERVAL,RESERVETYPE) =L=
         (UNIT_STATUS(GEN,INTERVAL)+PUMPING(GEN,INTERVAL))*RESERVEVALUE(RESERVETYPE,"RESERVE_ON")*GENVALUE(GEN,"RAMP_RATE")*RESERVEVALUE(RESERVETYPE,"RESERVE_TIME")*
                 RESERVEVALUE(RESERVETYPE,"RESERVE_AGC")*GENVALUE(GEN,"AGC_QUALIFIED")
         + (UNIT_STATUS(GEN,INTERVAL)+PUMPING(GEN,INTERVAL))*RESERVEVALUE(RESERVETYPE,"RESERVE_ON")*GENVALUE(GEN,"RAMP_RATE")*RESERVEVALUE(RESERVETYPE,"RESERVE_TIME")*
                 (1-RESERVEVALUE(RESERVETYPE,"RESERVE_AGC"))
         + (1 - (   MIN(1,UNIT_STATUS(GEN,INTERVAL)+PUMPING(GEN,INTERVAL)))   ) * (1 - RESERVEVALUE(RESERVETYPE,"RESERVE_ON")) * QSC(GEN,RESERVETYPE)
;
=end
=start
Q_RESERVE_RAMPUP_LIMIT(GEN,INTERVAL)..
SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_ON") EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 1 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(GEN,INTERVAL,RESERVETYPE)/RESERVEVALUE(RESERVETYPE,"RESERVE_TIME"))
         =L= UNIT_STATUS(GEN,INTERVAL)*GENVALUE(GEN,"RAMP_RATE") + PUMPING(GEN,INTERVAL)*STORAGEVALUE(GEN,"PUMP_RAMP_RATE")
;
=end
=start
Q_RESERVE_RAMPDOWN_LIMIT(GEN,INTERVAL)..
SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_ON") EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 2 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(GEN,INTERVAL,RESERVETYPE)/RESERVEVALUE(RESERVETYPE,"RESERVE_TIME"))
         =L= UNIT_STATUS(GEN,INTERVAL)*GENVALUE(GEN,"RAMP_RATE") + PUMPING(GEN,INTERVAL)*STORAGEVALUE(GEN,"PUMP_RAMP_RATE")
;
=end
=start
Q_RESERVE_CAPABILITY_VG(VARIABLE_GEN,INTERVAL,RESERVETYPE)..
GEN_RESERVE_SCHEDULE(VARIABLE_GEN,INTERVAL,RESERVETYPE) =L= GENVALUE(VARIABLE_GEN,"CAPACITY")*RESERVEVALUE(RESERVETYPE,"RESERVE_VG")
;
=end
=start
Q_RESERVE_SUSD_TRAJECTORY(GEN,INTERVAL,RESERVETYPE)..
GEN_RESERVE_SCHEDULE(GEN,INTERVAL,RESERVETYPE) =L=
         GENVALUE(GEN,"CAPACITY")*(1 - UNIT_STARTINGUP(GEN,INTERVAL) - UNIT_SHUTTINGDOWN(GEN,INTERVAL))
;
=end
=start
Q_REGULATION_AND_DISPATCH_RAMP_SHARE_UP(RAMP_LIMITED_GEN,INTERVAL)$(ORD(INTERVAL) GT 1)..
GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL) - GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL - 1)
         + SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_AGC") EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 1 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL,RESERVETYPE)) =L= GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*INTERVAL_MINUTES(INTERVAL)
         + (UNIT_STARTINGUP(RAMP_LIMITED_GEN,INTERVAL) + UNIT_SHUTTINGDOWN(RAMP_LIMITED_GEN,INTERVAL))*GENVALUE(RAMP_LIMITED_GEN,INTERVAL)
;
=end
=start
Q_REGULATION_AND_DISPATCH_RAMP_SHARE_UP1(RAMP_LIMITED_GEN,INTERVAL)$(ORD(INTERVAL) EQ 1)..
GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL) - LAST_GEN_SCHEDULE(RAMP_LIMITED_GEN)
         + SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_AGC") EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 1 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL,RESERVETYPE)) =L= GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*INTERVAL_MINUTES(INTERVAL)
         + (UNIT_STARTINGUP(RAMP_LIMITED_GEN,INTERVAL) + UNIT_SHUTTINGDOWN(RAMP_LIMITED_GEN,INTERVAL))*GENVALUE(RAMP_LIMITED_GEN,INTERVAL)
;
=end
=start
Q_REGULATION_AND_DISPATCH_RAMP_SHARE_DOWN(RAMP_LIMITED_GEN,INTERVAL)$(ORD(INTERVAL) GT 1)..
GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL - 1) - GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL)
         + SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_AGC") EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 2 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL,RESERVETYPE)) =L= GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*INTERVAL_MINUTES(INTERVAL)
         + (UNIT_STARTINGUP(RAMP_LIMITED_GEN,INTERVAL) + UNIT_SHUTTINGDOWN(RAMP_LIMITED_GEN,INTERVAL))*GENVALUE(RAMP_LIMITED_GEN,INTERVAL)
;
=end
=start
Q_REGULATION_AND_DISPATCH_RAMP_SHARE_DOWN1(RAMP_LIMITED_GEN,INTERVAL)$(ORD(INTERVAL) EQ 1)..
LAST_GEN_SCHEDULE(RAMP_LIMITED_GEN) - GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL)
         + SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_AGC") EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 2 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL,RESERVETYPE)) =L= GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*INTERVAL_MINUTES(INTERVAL)
         + (UNIT_STARTINGUP(RAMP_LIMITED_GEN,INTERVAL) + UNIT_SHUTTINGDOWN(RAMP_LIMITED_GEN,INTERVAL))*GENVALUE(RAMP_LIMITED_GEN,INTERVAL)
;
=end