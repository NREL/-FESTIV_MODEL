=start
Q_STORAGE_GENERATING_START(CONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) EQ 1)..
STORAGE_LEVEL(CONVENTIONAL_STORAGE_GEN,INTERVAL) =E= STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"INITIAL_STORAGE")
;
=end
=start
Q_STORAGE_GENERATING(CONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) GT 1)..
STORAGE_LEVEL(CONVENTIONAL_STORAGE_GEN,INTERVAL) =E= STORAGE_LEVEL(CONVENTIONAL_STORAGE_GEN,INTERVAL-1) - GEN_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL-1)*(INTERVAL_MINUTES(INTERVAL-1)/60)
         + CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL-1)*(INTERVAL_MINUTES(INTERVAL-1)/60)*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"EFFICIENCY")
;
=end
=start
Q_STORAGE_GENERATING_END(CONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) EQ CARD(INTERVAL))..
ENDING_STORAGE(CONVENTIONAL_STORAGE_GEN) =E= STORAGE_LEVEL(CONVENTIONAL_STORAGE_GEN,INTERVAL)
         - GEN_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL)*(INTERVAL_MINUTES(INTERVAL)/60)
         + CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL)*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"EFFICIENCY")*(INTERVAL_MINUTES(INTERVAL)/60)
;
=end
=start
Q_PUMPMAXLIMIT(CONVENTIONAL_STORAGE_GEN,INTERVAL)..
CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL) =L= (  STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MAX_PUMP")*PUMPING(CONVENTIONAL_STORAGE_GEN,INTERVAL)  )*(1-DELAYPUMPSD(CONVENTIONAL_STORAGE_GEN))
                                                                        + DELAYPUMPSD(CONVENTIONAL_STORAGE_GEN)*MAX(STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP"),(ACTUAL_PUMP_OUTPUT(CONVENTIONAL_STORAGE_GEN)-   (INTERVAL_MINUTES(INTERVAL)+(RTD_PROCESS_TIME*BIND_INTERVAL_1(INTERVAL)))       *STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_RAMP_RATE")))
;
=end
=start
Q_PUMPMINLIMIT(CONVENTIONAL_STORAGE_GEN,INTERVAL)..
CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL) =G= STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP")*PUMPING(CONVENTIONAL_STORAGE_GEN,INTERVAL)
;
=end
=start
Q_STORAGE_MAX(STORAGE_GEN,INTERVAL)..
STORAGE_LEVEL(STORAGE_GEN,INTERVAL) =L= STORAGEVALUE(STORAGE_GEN,"STORAGE_MAX") + WASTED_STORAGE(STORAGE_GEN,INTERVAL)
;
=end
=start
Q_STORAGE_MIN(STORAGE_GEN,INTERVAL)..
STORAGE_LEVEL(STORAGE_GEN,INTERVAL) =G= 0 - WASTED_STORAGE(STORAGE_GEN,INTERVAL)
;
=end
=start
Q_STORAGE_END(CONVENTIONAL_STORAGE_GEN)$(STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"ENFORCE_FINAL_STORAGE") EQ 1)..
ENDING_STORAGE(CONVENTIONAL_STORAGE_GEN) =E= STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"FINAL_STORAGE") + END_STORAGE_PENALTY_PLUS(CONVENTIONAL_STORAGE_GEN) - END_STORAGE_PENALTY_MINUS(CONVENTIONAL_STORAGE_GEN)
;
=end
=start
Q_PUMPMINLIMIT2(CONVENTIONAL_STORAGE_GEN,INTERVAL)..
CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL)
         - SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_ON")EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 1 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL,RESERVETYPE)) =G=
         STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP")*(PUMPING(CONVENTIONAL_STORAGE_GEN,INTERVAL)
         - UNIT_PUMPINGUP(CONVENTIONAL_STORAGE_GEN,INTERVAL) - UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL))
         + UNIT_PUMPINGUP(CONVENTIONAL_STORAGE_GEN,INTERVAL)*MIN(STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP"),(UNIT_PUMPUPMINGENHELP(CONVENTIONAL_STORAGE_GEN,INTERVAL)+
         SUM(H$(ORD(H) LE ORD(INTERVAL) AND ORD(H) GE 1),
                 STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP")*UNIT_PUMPINGUP(CONVENTIONAL_STORAGE_GEN,H)*(MIN(1,INTERVAL_MINUTES(H)/(60*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_STARTUP_TIME")))))))
         - UNIT_STATUS(CONVENTIONAL_STORAGE_GEN,INTERVAL)*GENVALUE(CONVENTIONAL_STORAGE_GEN,"CAPACITY")
;
=end
=start
Q_PUMPMAXLIMIT2(CONVENTIONAL_STORAGE_GEN,INTERVAL)..
CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL) +
         SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_ON")EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 2 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL,RESERVETYPE))  =L=
         (  GENVALUE(CONVENTIONAL_STORAGE_GEN,"CAPACITY")*(MAX(0,PUMPING(CONVENTIONAL_STORAGE_GEN,INTERVAL)-UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL)))
                 + UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL)*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP")*((MAX(1,(STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_SHUTDOWN_TIME")*60)/RTDINTERVAL_LENGTH))-PUMPUNITSDCOUNT(CONVENTIONAL_STORAGE_GEN,INTERVAL))/(MAX(1,(STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_SHUTDOWN_TIME")*60)/RTDINTERVAL_LENGTH))       )*(1-DELAYPUMPSD(CONVENTIONAL_STORAGE_GEN))
                       + DELAYPUMPSD(CONVENTIONAL_STORAGE_GEN)*MAX(STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP"),(ACTUAL_PUMP_OUTPUT(CONVENTIONAL_STORAGE_GEN)-   (INTERVAL_MINUTES(INTERVAL)+(RTD_PROCESS_TIME*BIND_INTERVAL_1(INTERVAL)))       *STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_RAMP_RATE")))
;
=end
=start
Q_LESR_TOTAL_GEN(LESR,INTERVAL)..
GEN_SCHEDULE(LESR,INTERVAL) =E= NC_STORAGE_GEN_SCHEDULE(LESR,INTERVAL) - NC_STORAGE_PUMP_SCHEDULE(LESR,INTERVAL)
;
=end
=start
Q_STORAGE_UNCONVENTIONAL_START(UNCONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) EQ 1)..
STORAGE_LEVEL(UNCONVENTIONAL_STORAGE_GEN,INTERVAL) =E= STORAGEVALUE(UNCONVENTIONAL_STORAGE_GEN,"INITIAL_STORAGE") - NC_STORAGE_GEN_SCHEDULE(UNCONVENTIONAL_STORAGE_GEN,INTERVAL)*(RTDINTERVAL_LENGTH/60)
         + (NC_STORAGE_PUMP_SCHEDULE(UNCONVENTIONAL_STORAGE_GEN,INTERVAL)*(RTDINTERVAL_LENGTH/60)*GENVALUE(UNCONVENTIONAL_STORAGE_GEN,"EFFICIENCY"))
;
=end
=start
Q_STORAGE_UNCONVENTIONAL1(UNCONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) GT 1)..
STORAGE_LEVEL(UNCONVENTIONAL_STORAGE_GEN,INTERVAL) =E= STORAGE_LEVEL(UNCONVENTIONAL_STORAGE_GEN,INTERVAL-1) - NC_STORAGE_GEN_SCHEDULE(UNCONVENTIONAL_STORAGE_GEN,INTERVAL)*(RTDINTERVAL_LENGTH/60)
         + (NC_STORAGE_PUMP_SCHEDULE(UNCONVENTIONAL_STORAGE_GEN,INTERVAL)*(RTDINTERVAL_LENGTH/60)*GENVALUE(UNCONVENTIONAL_STORAGE_GEN,"EFFICIENCY"))
;
=end
=start
Q_STORAGE_UNCONVENTIONAL2(UNCONVENTIONAL_STORAGE_GEN,INTERVAL)..
NC_STORAGE_GEN_SCHEDULE(UNCONVENTIONAL_STORAGE_GEN,INTERVAL) =L= GENVALUE(UNCONVENTIONAL_STORAGE_GEN,"CAPACITY")
;
=end
=start
Q_STORAGE_UNCONVENTIONAL3(UNCONVENTIONAL_STORAGE_GEN,INTERVAL)..
NC_STORAGE_PUMP_SCHEDULE(UNCONVENTIONAL_STORAGE_GEN,INTERVAL) =L= GENVALUE(UNCONVENTIONAL_STORAGE_GEN,"CAPACITY")
;
=end
=start
Q_CSP_TOTAL_GEN(CSP_GEN,INTERVAL)..
GEN_SCHEDULE(CSP_GEN,INTERVAL) =E= VG_FORECAST(INTERVAL,CSP_GEN) + NC_STORAGE_GEN_SCHEDULE(CSP_GEN,INTERVAL) - NC_STORAGE_PUMP_SCHEDULE(CSP_GEN,INTERVAL)
;
=end
=start
Q_STORAGE_RESERVE1(STORAGE_GEN,INTERVAL,RESERVETYPE)$(ORD(INTERVAL) GT 1)..
GEN_RESERVE_SCHEDULE(STORAGE_GEN,INTERVAL,RESERVETYPE) =L= STORAGE_LEVEL(STORAGE_GEN,INTERVAL-1)
         + CONVENTIONAL_PUMP_SCHEDULE(STORAGE_GEN,INTERVAL) + WASTED_STORAGE(STORAGE_GEN,INTERVAL)
;
=end
=start
Q_STORAGE_RESERVE2(STORAGE_GEN,INTERVAL,RESERVETYPE)$(ORD(INTERVAL) EQ 1)..
GEN_RESERVE_SCHEDULE(STORAGE_GEN,INTERVAL,RESERVETYPE) =L= STORAGEVALUE(STORAGE_GEN,"INITIAL_STORAGE") + CONVENTIONAL_PUMP_SCHEDULE(STORAGE_GEN,INTERVAL)
         + WASTED_STORAGE(STORAGE_GEN,INTERVAL)
;
=end
=start
Q_PUMP_RAMP_RATE_UP(CONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) GT 1)..
CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL) - CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL-1)
         =L= INTERVAL_MINUTES(INTERVAL)*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_RAMP_RATE")
         *(PUMPING(CONVENTIONAL_STORAGE_GEN,INTERVAL)-UNIT_PUMPINGUP(CONVENTIONAL_STORAGE_GEN,INTERVAL))
         + STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP")*(INTERVAL_MINUTES(INTERVAL)/(60*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_STARTUP_TIME")))*UNIT_PUMPINGUP(CONVENTIONAL_STORAGE_GEN,INTERVAL)
         + RAMP_UP_PENALTY(CONVENTIONAL_STORAGE_GEN,INTERVAL)
;
=end
=start
Q_PUMP_RAMP_RATE_DOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) GT 1)..
CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL) - CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL-1)
         =G= -1*INTERVAL_MINUTES(INTERVAL)*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_RAMP_RATE")
         *(PUMPING(CONVENTIONAL_STORAGE_GEN,INTERVAL-1)-UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL))
         - STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP")*MIN(1,(INTERVAL_MINUTES(INTERVAL)/(STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_SHUTDOWN_TIME")*60))*UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL))
         + MAX(0,INTERVAL_MINUTES(INTERVAL) - (STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_SHUTDOWN_TIME")*60))*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_RAMP_RATE")*UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL)
         - RAMP_DOWN_PENALTY(CONVENTIONAL_STORAGE_GEN,INTERVAL)*UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL)
;
=end
=start
Q_PUMP_RAMP_RATE_UP0_BP(CONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) EQ 1)..
CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL) - LAST_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN) =L=
         (RTDINTERVAL_UPDATE*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_RAMP_RATE") + RAMP_SLACK_UP(CONVENTIONAL_STORAGE_GEN))
         *(PUMPING(CONVENTIONAL_STORAGE_GEN,INTERVAL) - UNIT_PUMPINGUP(CONVENTIONAL_STORAGE_GEN,INTERVAL))
         + (UNIT_PUMPINGUP(CONVENTIONAL_STORAGE_GEN,INTERVAL))*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP")
         *(RTDINTERVAL_UPDATE/(60*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_STARTUP_TIME")))
         + STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MAX_PUMP")*INITIAL_DISPATCH_SLACK("IGNORE_BP") + RAMP_UP_PENALTY(CONVENTIONAL_STORAGE_GEN,INTERVAL) + DELAYPUMPSD(CONVENTIONAL_STORAGE_GEN)*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MAX_PUMP");
;
=end
=start
Q_PUMP_RAMP_RATE_DOWN0_BP(CONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) EQ 1)..
CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL) - LAST_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN) =G=
         (-1*RTDINTERVAL_UPDATE*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_RAMP_RATE")
         - RAMP_SLACK_DOWN(CONVENTIONAL_STORAGE_GEN) )*(LAST_PUMPSTATUS(CONVENTIONAL_STORAGE_GEN)
         - UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL))
         - UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL)
         *MIN(1,(RTDINTERVAL_UPDATE/(STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_SHUTDOWN_TIME")*60)))*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP")
         - MAX(0,RTDINTERVAL_UPDATE - (STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_SHUTDOWN_TIME")*60))*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_RAMP_RATE")*UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL)
         - GEN_FORCED_OUT(CONVENTIONAL_STORAGE_GEN)*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MAX_PUMP")
         - STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MAX_PUMP")*INITIAL_DISPATCH_SLACK("IGNORE_BP") - RAMP_DOWN_PENALTY(CONVENTIONAL_STORAGE_GEN,INTERVAL)*UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL) - DELAYPUMPSD(CONVENTIONAL_STORAGE_GEN)*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MAX_PUMP");
;
=end
=start
Q_PUMP_RAMP_RATE_UP0_ACTUAL(CONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) EQ 1)..
CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL) - ACTUAL_PUMP_OUTPUT(CONVENTIONAL_STORAGE_GEN) =L=
         (RTD_PROCESS_TIME+RTDINTERVAL_LENGTH)*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_RAMP_RATE")
         *(PUMPING(CONVENTIONAL_STORAGE_GEN,INTERVAL) - (MIN(1,UNIT_PUMPINGUP(CONVENTIONAL_STORAGE_GEN,INTERVAL)+UNIT_PUMPINGUP_ACTUAL(CONVENTIONAL_STORAGE_GEN))))
         + ((MIN(1,UNIT_PUMPINGUP(CONVENTIONAL_STORAGE_GEN,INTERVAL)+UNIT_PUMPINGUP_ACTUAL(CONVENTIONAL_STORAGE_GEN))))*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP")
         *((RTD_PROCESS_TIME+RTDINTERVAL_LENGTH)/(60*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_STARTUP_TIME")))
         + STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MAX_PUMP")*INITIAL_DISPATCH_SLACK("IGNORE_ACTUAL")   + RAMP_UP_PENALTY(CONVENTIONAL_STORAGE_GEN,INTERVAL);
;
=end
=start
Q_PUMP_RAMP_RATE_DOWN0_ACTUAL(CONVENTIONAL_STORAGE_GEN,INTERVAL)$(ORD(INTERVAL) EQ 1)..
CONVENTIONAL_PUMP_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL) - ACTUAL_PUMP_OUTPUT(CONVENTIONAL_STORAGE_GEN) =G= -1*(RTD_PROCESS_TIME+RTDINTERVAL_LENGTH)*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_RAMP_RATE")
         *(LAST_PUMPSTATUS_ACTUAL(CONVENTIONAL_STORAGE_GEN) - MIN(1,UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL)+UNIT_PUMPINGDOWN_ACTUAL(CONVENTIONAL_STORAGE_GEN)))
         - MIN(1,UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL)+UNIT_PUMPINGDOWN_ACTUAL(CONVENTIONAL_STORAGE_GEN))
         *(MIN(1,(RTD_PROCESS_TIME+RTDINTERVAL_LENGTH)/(STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_SHUTDOWN_TIME")*60)))*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP")
          - GEN_FORCED_OUT(CONVENTIONAL_STORAGE_GEN)*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MAX_PUMP")
          - STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MAX_PUMP")*INITIAL_DISPATCH_SLACK("IGNORE_ACTUAL")
         - RAMP_DOWN_PENALTY(CONVENTIONAL_STORAGE_GEN,INTERVAL)*MIN(1,UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL)+UNIT_PUMPINGDOWN_ACTUAL(CONVENTIONAL_STORAGE_GEN))
                  - MAX(0,LAST_PUMPSTATUS_ACTUAL(CONVENTIONAL_STORAGE_GEN)-LAST_STATUS(CONVENTIONAL_STORAGE_GEN))*STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MIN_PUMP")/MAX(1,(STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"PUMP_SHUTDOWN_TIME")*60)/RTDINTERVAL_LENGTH);
;
=end
=start
Q_RESERVE_PUMP_SUSD_TRAJECTORY(CONVENTIONAL_STORAGE_GEN,INTERVAL,RESERVETYPE)..
GEN_RESERVE_SCHEDULE(CONVENTIONAL_STORAGE_GEN,INTERVAL,RESERVETYPE) =L=
         STORAGEVALUE(CONVENTIONAL_STORAGE_GEN,"MAX_PUMP")*(1 - UNIT_PUMPINGUP(CONVENTIONAL_STORAGE_GEN,INTERVAL) - UNIT_PUMPINGDOWN(CONVENTIONAL_STORAGE_GEN,INTERVAL))
;
=end