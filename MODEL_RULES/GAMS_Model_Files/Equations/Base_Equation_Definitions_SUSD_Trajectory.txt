=start
Q_SU_GENLIMITLOW_TRAJECTORY1(MIN_GEN_GEN,INTERVAL)$(ORD(INTERVAL) LE CARD(INTERVAL) - SHUTDOWN_PERIOD(MIN_GEN_GEN) AND (ORD(INTERVAL) GE STARTUP_PERIOD(MIN_GEN_GEN)-INTERVALS_STARTED_AGO(MIN_GEN_GEN)))..
GEN_SCHEDULE(MIN_GEN_GEN,INTERVAL)
         - SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_ON")EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 2 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(MIN_GEN_GEN,INTERVAL,RESERVETYPE)) =G= GENVALUE(MIN_GEN_GEN,"MIN_GEN")*(UNIT_STATUS(MIN_GEN_GEN,INTERVAL)
         - SUM(H$(ORD(H) GE ORD(INTERVAL) AND ORD(H) LE (ORD(INTERVAL) + SHUTDOWN_PERIOD(MIN_GEN_GEN)-1)),UNIT_SHUTDOWN(MIN_GEN_GEN,H))
         - SUM(H$(ORD(H) LE ORD(INTERVAL) AND ORD(H) GE (ORD(INTERVAL) - STARTUP_PERIOD(MIN_GEN_GEN)+1 )),UNIT_STARTUP(MIN_GEN_GEN,H))
         ) +
         SUM(H$(ORD(H) LE ORD(INTERVAL) AND ORD(H) GE (ORD(INTERVAL) - STARTUP_PERIOD(MIN_GEN_GEN)+1 )),
         (ORD(INTERVAL)-ORD(H)+1)*UNIT_STARTUP(MIN_GEN_GEN,H))*GENVALUE(MIN_GEN_GEN,"MIN_GEN")*MIN(1,INTERVAL_LENGTH/GENVALUE(MIN_GEN_GEN,"STARTUP_TIME"))
         +
         SUM(H$(ORD(H) GE ORD(INTERVAL) AND ORD(H) LE (ORD(INTERVAL) + SHUTDOWN_PERIOD(MIN_GEN_GEN)-1)),
         (ORD(H)-ORD(INTERVAL))*GENVALUE(MIN_GEN_GEN,"MIN_GEN")*UNIT_SHUTDOWN(MIN_GEN_GEN,H))*MIN(1,(INTERVAL_LENGTH/GENVALUE(MIN_GEN_GEN,"SHUTDOWN_TIME")))

         - PUMPING(MIN_GEN_GEN,INTERVAL)*STORAGEVALUE(MIN_GEN_GEN,"MAX_PUMP")
;
=end
=start
Q_SU_GENLIMITLOW_TRAJECTORY2(MIN_GEN_GEN,INTERVAL)$(ORD(INTERVAL) LT  STARTUP_PERIOD(MIN_GEN_GEN)-INTERVALS_STARTED_AGO(MIN_GEN_GEN))..
GEN_SCHEDULE(MIN_GEN_GEN,INTERVAL)
         - SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_ON")EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 2 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(MIN_GEN_GEN,INTERVAL,RESERVETYPE)) =G= GENVALUE(MIN_GEN_GEN,"MIN_GEN")*(UNIT_STATUS(MIN_GEN_GEN,INTERVAL)
         - SUM(H$(ORD(H) GE ORD(INTERVAL) AND ORD(H) LE (ORD(INTERVAL) + SHUTDOWN_PERIOD(MIN_GEN_GEN)-1)),UNIT_SHUTDOWN(MIN_GEN_GEN,H))
         - PREVIOUS_UNIT_STARTUP(MIN_GEN_GEN) - SUM(H$(ORD(H) LE ORD(INTERVAL)),UNIT_STARTUP(MIN_GEN_GEN,H))
         ) +
         (PREVIOUS_UNIT_STARTUP(MIN_GEN_GEN))*(INTERVALS_STARTED_AGO(MIN_GEN_GEN)+ ORD(INTERVAL))*GENVALUE(MIN_GEN_GEN,"MIN_GEN")*MIN(1,INTERVAL_LENGTH/GENVALUE(MIN_GEN_GEN,"STARTUP_TIME")) +
         SUM(H$(ORD(H) LE ORD(INTERVAL)),
         (ORD(INTERVAL)-ORD(H)+1)*INTERVAL_LENGTH*UNIT_STARTUP(MIN_GEN_GEN,H))*GENVALUE(MIN_GEN_GEN,"MIN_GEN")/GENVALUE(MIN_GEN_GEN,"STARTUP_TIME")
         +
         SUM(H$(ORD(H) GE ORD(INTERVAL) AND ORD(H) LE (ORD(INTERVAL) + SHUTDOWN_PERIOD(MIN_GEN_GEN)-1)),
         (ORD(H)-ORD(INTERVAL))*UNIT_SHUTDOWN(MIN_GEN_GEN,H))*(GENVALUE(MIN_GEN_GEN,"MIN_GEN")*MIN(1,INTERVAL_LENGTH/GENVALUE(MIN_GEN_GEN,"SHUTDOWN_TIME")))
         - PUMPING(MIN_GEN_GEN,INTERVAL)*STORAGEVALUE(MIN_GEN_GEN,"MAX_PUMP")
;
=end
=start
Q_SU_GENLIMITLOW_TRAJECTORY3(MIN_GEN_GEN,INTERVAL)$(ORD(INTERVAL) GT  CARD(INTERVAL) - SHUTDOWN_PERIOD(MIN_GEN_GEN) AND ORD(INTERVAL) GE STARTUP_PERIOD(MIN_GEN_GEN) - INTERVALS_STARTED_AGO(MIN_GEN_GEN))..
GEN_SCHEDULE(MIN_GEN_GEN,INTERVAL)
         - SUM(RESERVETYPE$(RESERVEVALUE(RESERVETYPE,"RESERVE_ON")EQ 1 AND (RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 2 OR RESERVEVALUE(RESERVETYPE,"RESERVE_DIR") EQ 3)),
         GEN_RESERVE_SCHEDULE(MIN_GEN_GEN,INTERVAL,RESERVETYPE)) =G= GENVALUE(MIN_GEN_GEN,"MIN_GEN")*(UNIT_STATUS(MIN_GEN_GEN,INTERVAL)
         - SUM(H$(ORD(H) GE ORD(INTERVAL) AND ORD(H) LE CARD(INTERVAL)),UNIT_SHUTDOWN(MIN_GEN_GEN,H))
         - SUM(H$(ORD(H) LE ORD(INTERVAL) AND ORD(H) GE (ORD(INTERVAL) - STARTUP_PERIOD(MIN_GEN_GEN) + 1)),UNIT_STARTUP(MIN_GEN_GEN,H))
         ) +
         SUM(H$(ORD(H) LE ORD(INTERVAL) AND ORD(H) GE (ORD(INTERVAL) - STARTUP_PERIOD(MIN_GEN_GEN)+1 )),
         (ORD(INTERVAL)-ORD(H)+1)*UNIT_STARTUP(MIN_GEN_GEN,H))*GENVALUE(MIN_GEN_GEN,"MIN_GEN")*MIN(1,INTERVAL_LENGTH/GENVALUE(MIN_GEN_GEN,"STARTUP_TIME"))
         +
         SUM(H$(ORD(H) GE ORD(INTERVAL) AND ORD(H) LE CARD(INTERVAL) ),
         (ORD(H)-ORD(INTERVAL))*GENVALUE(MIN_GEN_GEN,"MIN_GEN")*UNIT_SHUTDOWN(MIN_GEN_GEN,H))*MIN(1,(INTERVAL_LENGTH/GENVALUE(MIN_GEN_GEN,"SHUTDOWN_TIME")))
         - PUMPING(MIN_GEN_GEN,INTERVAL)*STORAGEVALUE(MIN_GEN_GEN,"MAX_PUMP")
;
=end
=start
Q_SU_RAMPUP_TRAJECTORY1(RAMP_LIMITED_GEN,INTERVAL)$(ORD(INTERVAL) GT STARTUP_PERIOD(RAMP_LIMITED_GEN) - INTERVALS_STARTED_AGO(RAMP_LIMITED_GEN) AND ORD(INTERVAL) GT 1)..
GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL) - GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL-1)
         =L= GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*60*INTERVAL_LENGTH*
                 (UNIT_STATUS(RAMP_LIMITED_GEN,INTERVAL) - SUM(H$(ORD(H) LE ORD(INTERVAL) AND ORD(H) GT (ORD(INTERVAL) - STARTUP_PERIOD(RAMP_LIMITED_GEN))),UNIT_STARTUP(RAMP_LIMITED_GEN,H))
                 )
          + (SUM(H$(ORD(H) LE ORD(INTERVAL) AND ORD(H) GT (ORD(INTERVAL) - STARTUP_PERIOD(RAMP_LIMITED_GEN))),UNIT_STARTUP(RAMP_LIMITED_GEN,H))*
                 (GENVALUE(RAMP_LIMITED_GEN,"MIN_GEN")*MIN(1,INTERVAL_LENGTH/GENVALUE(RAMP_LIMITED_GEN,"STARTUP_TIME"))
                 + MAX(0,INTERVAL_LENGTH - GENVALUE(RAMP_LIMITED_GEN,"STARTUP_TIME"))*GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*60
                 )
            )
         +RAMP_UP_PENALTY(RAMP_LIMITED_GEN,INTERVAL)
;
=end
=start
Q_SU_RAMPUP_TRAJECTORY2(RAMP_LIMITED_GEN,INTERVAL)$(ORD(INTERVAL) LE  STARTUP_PERIOD(RAMP_LIMITED_GEN)-INTERVALS_STARTED_AGO(RAMP_LIMITED_GEN) AND ORD(INTERVAL) GT 1)..
GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL) - GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL-1)
         =L= GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*60*INTERVAL_LENGTH*
                 (UNIT_STATUS(RAMP_LIMITED_GEN,INTERVAL) - PREVIOUS_UNIT_STARTUP(RAMP_LIMITED_GEN) - SUM(H$(ORD(H) LE ORD(INTERVAL)),UNIT_STARTUP(RAMP_LIMITED_GEN,H))
                 )
          + ((PREVIOUS_UNIT_STARTUP(RAMP_LIMITED_GEN) + SUM(H$(ORD(H) LE ORD(INTERVAL)),UNIT_STARTUP(RAMP_LIMITED_GEN,H)))*
                 (GENVALUE(RAMP_LIMITED_GEN,"MIN_GEN")*MIN(1,INTERVAL_LENGTH/GENVALUE(RAMP_LIMITED_GEN,"STARTUP_TIME"))
                 + MAX(0,INTERVAL_LENGTH - GENVALUE(RAMP_LIMITED_GEN,"STARTUP_TIME"))*GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*60
                 )
            )
         + RAMP_UP_PENALTY(RAMP_LIMITED_GEN,INTERVAL)
;
=end
=start
Q_SU_RAMPDOWN_TRAJECTORY1(RAMP_LIMITED_GEN,INTERVAL)$(ORD(INTERVAL) LE (CARD(INTERVAL) - SHUTDOWN_PERIOD(RAMP_LIMITED_GEN)) AND ORD(INTERVAL) GT 1)..
GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL-1) - GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL)
          =L= GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*60*INTERVAL_LENGTH*
                 (UNIT_STATUS(RAMP_LIMITED_GEN,INTERVAL-1) - SUM(H$(ORD(H) GE ORD(INTERVAL) AND (ORD(H) LE (ORD(INTERVAL) + SHUTDOWN_PERIOD(RAMP_LIMITED_GEN)-1))),UNIT_SHUTDOWN(RAMP_LIMITED_GEN,H))
                 )
          + (SUM(H$(ORD(H) GE ORD(INTERVAL) AND (ORD(H) LE (ORD(INTERVAL) + SHUTDOWN_PERIOD(RAMP_LIMITED_GEN)-1))),UNIT_SHUTDOWN(RAMP_LIMITED_GEN,H))*
                 (GENVALUE(RAMP_LIMITED_GEN,"MIN_GEN")*MIN(1,INTERVAL_LENGTH/GENVALUE(RAMP_LIMITED_GEN,"SHUTDOWN_TIME"))
                 + MAX(0,INTERVAL_LENGTH - GENVALUE(RAMP_LIMITED_GEN,"SHUTDOWN_TIME"))*GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*60
                 )
             )
          + RAMP_DOWN_PENALTY(RAMP_LIMITED_GEN,INTERVAL)
;
=end
=start
Q_SU_RAMPDOWN_TRAJECTORY2(RAMP_LIMITED_GEN,INTERVAL)$(ORD(INTERVAL) GT  (CARD(INTERVAL) - SHUTDOWN_PERIOD(RAMP_LIMITED_GEN)) AND ORD(INTERVAL) GT 1)..
GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL-1) - GEN_SCHEDULE(RAMP_LIMITED_GEN,INTERVAL)
         =L= GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*60*INTERVAL_LENGTH*
                 (UNIT_STATUS(RAMP_LIMITED_GEN,INTERVAL-1) - SUM(H$(ORD(H) GE ORD(INTERVAL) AND ORD(H) LE CARD(INTERVAL)),UNIT_SHUTDOWN(RAMP_LIMITED_GEN,H))
                 )
         + (SUM(H$(ORD(H) GE ORD(INTERVAL) AND ORD(H) LE CARD(INTERVAL)),UNIT_SHUTDOWN(RAMP_LIMITED_GEN,H))*
                 (GENVALUE(RAMP_LIMITED_GEN,"MIN_GEN")*MIN(1,INTERVAL_LENGTH/GENVALUE(RAMP_LIMITED_GEN,"SHUTDOWN_TIME"))
                 + MAX(0,INTERVAL_LENGTH - GENVALUE(RAMP_LIMITED_GEN,"SHUTDOWN_TIME"))*GENVALUE(RAMP_LIMITED_GEN,"RAMP_RATE")*60
                 )
           )
         + RAMP_DOWN_PENALTY(RAMP_LIMITED_GEN,INTERVAL)
;
=end
=start
Q_SU_RESERVE_TRAJECTORY1(GEN,INTERVAL,RESERVETYPE)$(ORD(INTERVAL) LE CARD(INTERVAL) - SHUTDOWN_PERIOD(GEN) AND (ORD(INTERVAL) GE STARTUP_PERIOD(GEN)-1))..
GEN_RESERVE_SCHEDULE(GEN,INTERVAL,RESERVETYPE) =L= GENVALUE(GEN,"CAPACITY")*(1
         - SUM(H$(ORD(H) GE ORD(INTERVAL) AND ORD(H) LE (ORD(INTERVAL) + SHUTDOWN_PERIOD(GEN)-1)),UNIT_SHUTDOWN(GEN,H))
         - SUM(H$(ORD(H) LE ORD(INTERVAL) AND ORD(H) GE (ORD(INTERVAL) - STARTUP_PERIOD(GEN) + 1)),UNIT_STARTUP(GEN,H))
         )
;
=end
=start
Q_SU_RESERVE_TRAJECTORY2(GEN,INTERVAL,RESERVETYPE)$(ORD(INTERVAL) LE  STARTUP_PERIOD(GEN)-INTERVALS_STARTED_AGO(GEN))..
GEN_RESERVE_SCHEDULE(GEN,INTERVAL,RESERVETYPE) =L= GENVALUE(GEN,"CAPACITY")*(1
         - SUM(H$(ORD(H) GE ORD(INTERVAL) AND ORD(H) LE (ORD(INTERVAL) + SHUTDOWN_PERIOD(GEN)-1)),UNIT_SHUTDOWN(GEN,H))
         - PREVIOUS_UNIT_STARTUP(GEN) - SUM(H$(ORD(H) LE ORD(INTERVAL)),UNIT_STARTUP(GEN,H))
         )
;
=end
=start
Q_SU_RESERVE_TRAJECTORY3(GEN,INTERVAL,RESERVETYPE)$(ORD(INTERVAL) GT  CARD(INTERVAL) - SHUTDOWN_PERIOD(GEN))..
GEN_RESERVE_SCHEDULE(GEN,INTERVAL,RESERVETYPE) =L= GENVALUE(GEN,"CAPACITY")*(1
         - SUM(H$(ORD(H) GE ORD(INTERVAL) AND ORD(H) LE CARD(INTERVAL)),UNIT_SHUTDOWN(GEN,H))
         - SUM(H$(ORD(H) LE ORD(INTERVAL) AND ORD(H) GE (ORD(INTERVAL) - STARTUP_PERIOD(GEN) + 1)),UNIT_STARTUP(GEN,H))
         )
;
=end
